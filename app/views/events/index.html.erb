
<script>
    var page = 0;

    function get_page(next)
    {
        if (next)
            page++;
        else if (page > 1)
            page--;
        else
            return;

        $("#events-table-body").html("");
        $.getJSON("<%= request.path %>.json?page=" + page, function(data) {
            $.each(data, function (key, value) {
                $("#events-table-body").append("<tr>" +
                        "<td>" + value['Title'] + "</td>" +
                        "<td>" + value['Description'] + "</td>" +
                        "<td>" + value['Address'] + "</td>" +
                        "<td>" + value['Latitude'] + "</td>" +
                        "<td>" + value['Longitude'] + "</td>" +
                        "<td>" + value['Category'] + "</td>" +
                        "<td>" + value['StartDate'] + "</td>" +
                        "<td>" + value['StartTime'] + "</td>" +
                        "<td>" + value['EndDate'] + "</td>" +
                        "<td>" + value['EndTime'] + "</td>" +
                        "<td><a href='" + value['show_url'] + "'>Show</a></td>" +
                        "<td><a href='" + value['edit_url'] + "'>Edit</a></td>" +
                        "<td><a data-confirm='Are you sure?' rel='nofollow' data-method='delete' href='"+ value['destroy_url'] + "'>Destroy</a></td>" +
                        "</tr>");
            });
        }).fail(function() {
            alert("An error occurred fetching the events list.");
        });
    }

    $(document).ready(function() {
        $('#prev-page').click(function(){ get_page(false); return false; });
        $('#next-page').click(function(){ get_page(true); return false; });
        get_page(true);
    });
</script>

<h1 style="padding:0px 0px 0px 15px">Listing Events</h1>

<table class="table table-striped table-hover ">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Address</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Category</th>
      <th>Start Date</th>
      <th>Start Time</th>
      <th>End Date</th>
      <th>End Time</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody id="events-table-body" />
</table>
<a id="prev-page" class="btn btn-primary">Previous Page</a>  <a id="next-page" class="btn btn-primary">Next Page</a>

<br><br>

<%= link_to 'New Event', new_event_path, class:"btn btn-primary"%>
