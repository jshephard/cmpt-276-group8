<div class="col-lg-4" style="padding: 15px">
<div class="well bs-component">
<legend>Login</legend>
<% flash.each do |message_type, message| %>
    <div class="alert alert-<%= message_type %>"><%= message %></div>
<% end %>
<script>
    $(document).ready(function() {
        $('#login_form').on('ajax:success', function (event, data, status, xhr) {
            $('#messages').html('<b>' + data.message + '</b>');
            // Delay the redirect to inform user of successful login.
            setTimeout(function() { window.location.replace(data.redirect) }, 1000);
        });
        $('#login_form').on('ajax:error', function (event, data, status, xhr) {
            $('#messages').html('<b>' + data.responseJSON.message + '</b>');

            <% #Change focus and select the text of either username or password %>
            if (!$('#session_username').val() || !$('#session_password').val())
                $('#session_username').focus().select();
            else
                $('#session_password').focus().select();
        });
    });
</script>
<div id="messages"></div>
<%= form_for :session, url: login_path, html: {id: 'login_form', :'data-type' => 'json'}, remote: true do |f| %>
    <div class="field">
      <span style="color: white">Username</span><br>
      <%= f.text_field :username, class:"form-control", placeholder:"Username" %>
    </div>
    <div class="field">
      <span style="color: white">Password</span><br>
      <%= f.password_field :password, class:"form-control",id:"inputPassword", placeholder:"Password" %>
    </div>
    <div class="field">
      <span style="color: white">Remember Me</span><br>
      <%= f.check_box :remember_me %>
    </div>
    <div class="actions">
      <%= f.submit 'Login', class:"btn btn-success", style:"color:white" %>
    </div>
<% end %>
<%= link_to 'Not a user? Sign up here.', register_path, class:"btn btn-warning", style:"color:white" %>
</div>
</div>